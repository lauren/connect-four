(function(e){var t={width:7,height:6,boardEl:document.getElementById("connect-four-board")},n={statusEl:document.getElementById("status-message"),statusHole:document.getElementById("turn-indicator")},r=function(e){for(var t in e)this[t]=e[t];this.winner=0,this.round=1,this.turn=1,this.init()};r.prototype.init=function(){this.board=new Board(t),this.updateStatus()},r.prototype.updateStatus=function(e){this.statusEl.innerHTML=e?e:"Player "+this.turn+"'s turn",this.statusHole.dataset.takenByPlayer=this.turn},r.prototype.play=function(e){if(this.winner===0&&this.board.columnAvailable(e)){var t=this.board.findNextHole(e);t.findMatchableHoles(this.board.width,this.board.height),t.status=this.turn,t.domEl.dataset.takenByPlayer=this.turn,this.board.checkForWinner(t)?(this.updateStatus("Player "+this.turn+" won! <a href='#' data-action='reset'>Start a new game</a>."),this.board.checkForWinner(t).map(function(e){e.domEl.dataset.winner="true"}),this.winner=this.turn,s(document,"click",o)):(this.turn=this.turn===2?1:2,this.round=this.turn===2?this.round+1:this.round,this.updateStatus())}else this.winner===0&&!this.board.columnAvailable(e)?this.updateStatus("That column is full! Player "+this.turn+", pick another column."):this.updateStatus("Player "+this.turn+" won! <a href='#' data-action='reset'>Start a new game</a>.")},r.prototype.reset=function(){this.winner=0,this.round=1,this.turn=1,this.updateStatus(),this.board.holes.map(function(e){e.map(function(e){e.reset()})}),i(document,"click",o)};var i=function(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent(t,n)},s=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n):e.removeEvent(t,n)},o=function(e){e.srcElement.className==="hole"&&a.play(e.srcElement.dataset.columnId)},u=function(e){e.srcElement.dataset.action==="reset"&&a.reset()},a=new r(n);i(document,"click",o),i(document,"click",u)})(this);