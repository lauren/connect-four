(function(e){var t=function(e){this.holes=[];for(var t in e)this[t]=e[t];this.init()};t.prototype.init=function(){for(var e=0;e<this.height;e++){this.holes.push([]);var t=document.createElement("div");t.id="row-"+e,t.className="row",this.boardEl.appendChild(t);for(var r=0;r<this.width;r++)this.holes[e].push(new n({status:0,row:t,rowId:e,columnId:r}))}},t.prototype.columnAvailable=function(e){return this.holes[0][e].status===0},t.prototype.findNextHole=function(e){var t=this.height-1;while(t>=0){if(this.holes[t][e].status===0)return this.holes[t][e];t-=1}return!1},t.prototype.checkForWinner=function(e){var t=this.findHorizontalMatches(e),n=this.findVerticalMatches(e),r=this.findDiagonalMatches(e,"right","up"),i=this.findDiagonalMatches(e,"left","up"),s=this.findDiagonalMatches(e,"right","down"),o=this.findDiagonalMatches(e,"left","down");return console.log("horizontal"),console.log(t),console.log("vertical"),console.log(n),console.log("right up diag"),console.log(r),console.log("left up diag"),console.log(i),console.log("right down diag"),console.log(s),console.log("left down diag"),console.log(o),t.length>=4?t:n.length>=4?n:r.length>=4?r:i.length>=4?i:s.length>=4?s:o.length>=4?o:!1},t.prototype.findHorizontalMatches=function(e){var t=this,n=e.rowId,r=e.findMatchableHoles(this.width),i=r.min,s=r.max,o=e.status,u=function(e,r){return e>=s||e<0?r:o===t.holes[n][e].status?u(e+1,r.concat([t.holes[n][e]])):u(e+1,r)};return u(i,[])},t.prototype.findVerticalMatches=function(e){var t=this,n=e.columnId,r=e.rowId,i=this.height,s=function(r,o){return r>=i?o:e.status===t.holes[r][n].status?s(r+1,o.concat([t.holes[r][n]])):o};return s(r,[])},t.prototype.findDiagonalMatches=function(e,t,n){var r=t==="left"?1:-1,i=n==="down"?1:-1;return board=this,currentColumn=e.columnId,currentRow=e.rowId,numRows=this.height,numColumns=this.width,checker=function(t,n,s){return n>=numColumns||t>=numRows||n<0||t<0?s:e.status===board.holes[t][n].status?checker(t+i,n+r,s.concat([board.holes[t][n]])):s},checker(currentRow,currentColumn,[])};var n=function(e){for(var t in e)this[t]=e[t];this.init()};n.prototype.init=function(){var e=document.createElement("div");e.className="hole",e.dataset.rowId=this.rowId,e.dataset.columnId=this.columnId,this.domEl=e,this.row.appendChild(e)},n.prototype.play=function(e){if(this.status===0){this.status=e,this.newDomHole.className="hole"+e;return}return!1},n.prototype.findMatchableHoles=function(e){var t=this.columnId;return holeRow=this.rowId,minX=Math.max(0,t-3),maxX=Math.min(e,t+3),{min:minX,max:maxX}},n.prototype.reset=function(){this.status=0,this.domEl.dataset.takenByPlayer="0",this.domEl.dataset.winner="false"},e.Hole=n,e.Board=t})(this);